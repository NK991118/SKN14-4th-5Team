<!-- c:/Workspaces/Personal_Anything/3rd_to_4th/fourth_project/templates/layout/nav.html -->

<nav class="navbar navbar-expand-lg navbar-custom">
  <div class="container-fluid">
    <a class="navbar-brand fw-bold" href="{% url 'app:index' %}">✏️ 논술 첨삭</a>
    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse justify-content-between" id="navbarNav">
      
      <!-- ★★★ 로그인 상태에 따라 다른 메뉴를 보여주는 로직 (재설계) ★★★ -->
      {% if user.is_authenticated %}
        <!-- ======== 로그인한 사용자가 볼 메뉴 ======== -->
        <ul class="navbar-nav">
          <li class="nav-item">
            <a class="nav-link" href="{% url 'app:index' %}"><i class="bi bi-house-door-fill"></i> 홈</a>
          </li>
          <li class="nav-item">
            <!-- ★★★ '나의 첨삭 히스토리'가 여기에 들어가는 거야! ★★★ -->
            <a class="nav-link" href="{% url 'app:history' %}"><i class="bi bi-clock-history"></i> 나의 첨삭 히스토리</a>
          </li>
        </ul>

        <!-- 오른쪽 사용자 메뉴 -->
        <ul class="navbar-nav">
          <li class="nav-item">
              <span class="nav-link text-white">환영합니다, {{ user.username }}님!</span>
          </li>
          <li class="nav-item">
              <a class="nav-link" href="{% url 'app:logout' %}">로그아웃</a>
          </li>
        </ul>

      {% else %}
        <!-- ======== 로그인하지 않은 사용자가 볼 메뉴 ======== -->
        <!-- 비로그인 시에는 모든 주요 기능 링크를 보여주는 게 자연스러워 -->
        <ul class="navbar-nav">
          <li class="nav-item"><a class="nav-link" href="{% url 'app:index' %}">홈</a></li>
          <li class="nav-item"><a class="nav-link" href="{% url 'app:01_select_question' %}">문항 선택</a></li>
          <li class="nav-item"><a class="nav-link" href="{% url 'app:02_my_answer' %}">나의 답안 입력</a></li>
        </ul>
        <!-- 오른쪽 로그인/회원가입 메뉴 -->
        <ul class="navbar-nav">
          <li class="nav-item">
              <a class="nav-link" href="{% url 'app:login' %}">로그인</a>
          </li>
          <li class="nav-item">
              <a class="nav-link" href="{% url 'app:signup' %}">회원가입</a>
          </li>
        </ul>
      {% endif %}
    </div>
  </div>
</nav>